# Terraform入門：インフラを簡単に作る魔法の道具

## Terraformって何？

**Terraform（テラフォーム）** は、コンピュータのインフラを作るための特別な道具です。

まず、「**インフラ**」という言葉を説明しましょう。インフラとは、道路や電気、水道のように、私たちの生活を支える基本的なものです。コンピュータの世界では、サーバーやネットワーク、データベースなどがインフラです。

### 料理のレシピで例えてみましょう

Terraformは料理のレシピのようなものです：

- **普通の料理方法**：「まず玉ねぎを切って、次に炒めて、それから肉を入れて...」（手順を一つずつ説明）
- **Terraformの方法**：「完成した料理はカレーです。材料は玉ねぎ2個、肉300g、カレールー1箱です」（最終的な結果を説明）

## 宣言型 vs 手続き型

### 手続き型 - Procedural

手続き型は、**やり方を順番に書く**方法です。

```
1. サーバーを1台作りなさい
2. そのサーバーにソフトをインストールしなさい
3. 設定を変更しなさい
```

### 宣言型 - Declarative

宣言型は、**欲しい結果を書く**方法です。

```
「サーバーが1台、ソフトがインストール済み、設定が完了した状態にしてください」
```

**Terraformは宣言型です！**

これはとても便利です。なぜなら：

- 何を作りたいかを書くだけで、やり方はTerraformが考えてくれます
- 間違いが少なくなります
- 同じものを何度でも作ることができます

## Mutable vs Immutable Infrastructure

### Mutable Infrastructure（変更可能なインフラ）

**Mutable**は「変更できる」という意味です。

家で例えると：

- 古い家に住み続けて、壊れた部分を修理したり、新しい部屋を増築したりする
- 問題：何度も修理すると、元の状態がわからなくなる

### Immutable Infrastructure（変更不可能なインフラ）

**Immutable**は「変更しない」という意味です。

家で例えると：

- 古い家は壊して、新しい家を一から建て直す
- いつも新品の状態を保つことができる

**Terraformは基本的にImmutableの考え方です！**

### なぜImmutableが良いの？

1. **予想しやすい**：いつも同じ方法で作るので、結果が予測できる
2. **安全**：古い設定が残って問題を起こすことがない
3. **テストしやすい**：新しい環境でテストしてから、本番で使える

## IaCツールの種類

**IaC**は「Infrastructure as Code」の略です。これは「インフラをコードで管理する」という意味です。

図書館で例えると：

- **昔の方法**：手で本を一冊ずつ整理する
- **IaCの方法**：コンピュータに「本をジャンル別に並べて」と指示を書いて、自動で整理してもらる

### 主要なIaCツールとその使い道

| ツール名           | 主な使い道                           | 特徴                             |
| ------------------ | ------------------------------------ | -------------------------------- |
| **Terraform**      | インフラ全体を作る・管理する         | どこのクラウドでも使える         |
| **AWS CDK**        | AWSで開発者向けのコード              | 普通のプログラミング言語で書ける |
| **Pulumi**         | インフラを普通のプログラミング言語で | Python、JavaScriptなどが使える   |
| **Ansible**        | サーバーの中身を設定する             | 既存のサーバーの設定を変更       |
| **Chef/Puppet**    | サーバーの状態を維持する             | 「常にこの設定を保つ」ように監視 |
| **CloudFormation** | AWS専用                              | AWSのサービスだけを管理          |
| **ARM Templates**  | Azure専用                            | Azureのサービスだけを管理        |

### 家を建てることで例えると

- **Terraform**：家全体の設計図を作り、基礎から屋根まで全部を建てる
- **AWS CDK/Pulumi**：設計図を普段使っている言葉（日本語）で書く
- **Ansible**：家の中に家具を配置し、電気や水道を設定する
- **Chef/Puppet**：家を定期的に点検し、壊れた部分を修理する

## Terraformが使われる場面

### 1. クラウドサービスでサーバーを作る

- Amazon AWS
- Microsoft Azure
- Google Cloud Platform

### 2. 会社の中のサーバーを管理する

- VMware
- 物理サーバー

### 3. 様々なサービスを連携させる

- データベース
- セキュリティ設定
- ネットワーク設定

## なぜTerraformが人気なの？

### 1. どこでも使える

一つの道具で、いろいろなクラウド会社のサービスが使えます。

### 2. 安全

作る前に「これで大丈夫かな？」と確認できます。

### 3. チームで協力できる

みんなで同じ設定ファイルを共有できます。

### 4. 無料で使える

基本的な機能は無料です。

### 5. Immutableな方法

いつも新しい、きれいな環境を作ることができます。

## まとめ

- Terraformは**宣言型**のIaCツール
- 「欲しい結果」を書くだけで、インフラが自動で作られる
- **Immutable Infrastructure**の考え方で、いつもきれいな環境を保てる
- 他にもいろいろなIaCツールがあり、それぞれ得意分野が違う
- Terraformは特に「インフラ全体を作る」ことが得意
